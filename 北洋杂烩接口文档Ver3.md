# 北洋杂烩接口文档

## 一、帖子管理

* **所有查询操作都可以在后面加一个参数，例:`101.201.36.172:520/posts/{id}/{flag}`,表示按flag分类查询** 

* **flag:  0 拼车帖子 1 学习 2 玩乐**

| 接口url                                                   | 类型   | 返回值                                 | 说明                                                     |
| --------------------------------------------------------- | ------ | -------------------------------------- | -------------------------------------------------------- |
| 101.201.36.172:520/posts                                  | get    | {"flag":true,"data":所有玩乐帖子}      | 查所有帖子                                               |
| 101.201.36.172:520/posts/{id}                             | get    |                                        | 按id查一个帖子                                           |
| 101.201.36.172:520/posts/{currentPage}/{pageSize}         | get    |                                        | 给定页数和每页显示数目返回帖子（暂时还没有搜索结果分页） |
| 101.201.36.172:520/posts                                  | post   | {"flag":true或者false,"data":null}     | 增加一个帖子，需要json格式的帖子对象                     |
| 101.201.36.172:520/posts                                  | put    | {"flag":true或者false,"data":null}     | 更新帖子，需要json格式的帖子对象                         |
| 101.201.36.172:520/posts/{id}                             | delete | {"flag":true或者false,"data":null}     | 删除帖子                                                 |
| 101.201.36.172:520/posts/search/content/{content}         | get    | {"flag":true或者false,"data":搜索结果} | 按帖子内容搜索                                           |
| 101.201.36.172:520/posts/search/destination/{destination} | get    | {"flag":true或者false,"data":搜索结果} | 按帖子指定地点搜索                                       |

| 接口url                                                      | 类型 | 返回值                                 | 说明               |
| ------------------------------------------------------------ | ---- | -------------------------------------- | ------------------ |
| 101.201.36.172:520/posts/search/time/{year}/{month}/{day}/{hour}/{minute} | get  | {"flag":true或者false,"data":搜索结果} | 按帖子指定时间搜索 |

### 1、拼车帖子

| 接口url                                                      | 类型 | 返回值                        | 说明                 |
| ------------------------------------------------------------ | ---- | ----------------------------- | -------------------- |
| 101.201.36.172:520/posts/search/startlocation/{startLocation} | get  | {"flag":true,"data":搜索结果} | 按出发地点搜索       |
| 101.201.36.172:520/posts/search/destination/{destination}    | get  | {"flag":true,"data":搜索结果} | 按目的地搜索         |
| 101.201.36.172:520/posts/search/sad/{startLocation}/{destination} | get  | {"flag":true,"data":搜索结果} | 按出发地和目的地搜索 |

### 2、反馈帖子


| 接口url                     | 类型 | 返回值                             | 说明     |
| --------------------------- | ---- | ---------------------------------- | -------- |
| 101.201.36.172:520/feedback | post | {"flag":true或者false,"data":null} | 提交反馈 |



## 二、队伍管理

### 1、队伍增删查接口	

| 接口url                      | 类型   | 返回值                                   | 说明                       | 参数                               |
| ---------------------------- | ------ | ---------------------------------------- | -------------------------- | ---------------------------------- |
| 101.201.36.172:520/team/{id} | get    | {"flag":true或者false,"data":List<user>} | 按队伍id查找队伍里所有成员 |                                    |
| 101.201.36.172:520/team/{id} | delete | {"flag":true或者false,"data":null}       | 按队伍id删除队伍           |                                    |
| 101.201.36.172:520/team/join | post   | {"flag":true或者false,"data":null}       | 成员加入队伍               | teamId（队伍id）和memberId(用户id) |

### 2、用户申请管理

| 接口url                                     | 类型 | 返回值                                                       | 说明                                                         | 参数                              |
| ------------------------------------------- | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | --------------------------------- |
| 101.201.36.172:520/teams/apply              | Post | {"flag":true/false,"data"= null}                             | 申请人申请加入队伍                                           | {"teamId" : ,"memberId":}         |
| 101.201.36.172:520/teams/GAL/{tid}          | Get  | {"flag":true,"data":List<BufferList>}                        | 队长获取申请列表                                             | 路径参数 数据类型：String         |
| 101.201.36.172:520/teams/join               | Post | {"flag":true/false,"data"= null}                             | 队长同意成员加入队列                                         | {"teamId" :,"memberId":}          |
| 101.201.36.172:520/teams/refuse             | Post | {"flag":true/false,"data"= null}                             | 队长拒绝                                                     | {"uid" :,"tid":}                  |
| 101.201.36.172:520/teams/getSta/{tid}/{uid} | Get  | {"flag":true,"data"= 0/1/3/4} <br>0代表待审核，1代表同意，3代表申请人取消，4代表拒绝 | 获取状态码                                                   | 路径参数 数据类型：String         |
| 101.201.36.172:520/teams/count/{id}         | Get  | {"flag":true,"data":}                                        | 根据队伍id获得实际人数                                       | Int                               |
| 101.201.36.172:520/teams/cancel/{tid}/{uid} | Post | {"flag":true/false,"data"= null}                             | 申请人取消申请                                               |                                   |
| 101.201.36.172:520/teams/addedTeam/{uid}    | Get  | {"flag":true,"data":队伍名和队长名}                          | 获取自己加入的队伍                                           |                                   |
| 101.201.36.172:520/teams/myTeam/{uid}       | Get  | {"flag":true,"data":队伍id的int数组}                         | 获取自己创建的队伍                                           |                                   |
| 101.201.36.172:520/teams/myApply/{uid}      | Get  | {"flag":true,"data":队长昵称，队伍id，状态码}                | 获取自己申请的队伍                                           |                                   |
| 101.201.36.172:520/teams/message/{uid}      | Get  | {"flag":true,"data":{flag:0}{flag:1}}                        | 获取申请加入我的队伍的名单(flag:0)和我申请加入的队列(flag:1) | 用户ID，路径参数 数据类型：String |
|                                             |      |                                                              |                                                              |                                   |



## 三、用户管理

### 1、用户增删改查接口

| 接口url                                   | 类型   | 返回值                                 | 说明         | 参数 |
| ----------------------------------------- | ------ | -------------------------------------- | ------------ | ---- |
| 101.201.36.172:520/users                  | get    | {"flag":true或者false,"data":用户数组} | 查询所有用户 |      |
| 101.201.36.172:520/users/{id}             | get    | {"flag":true或者false,"data":用户}     | 按id查询用户 |      |
| 101.201.36.172:520/users                  | delete | {"flag":true或者false,"data":null}     | 按id删除用户 |      |
| 101.201.36.172:520/users/register         | post   | {"flag":true或者false,"data":null}     | 保存新用户   |      |
| 101.201.36.172:520/users                  | put    | {"flag":true或者false,"data":null}     | 修改用户     |      |
| 101.201.36.172:520/users/login/{id}/{pwd} | get    | {"flag":true或者false,"data":用户}     | 登录用户，   |      |
|                                           |        |                                        |              |      |

### 2、图片上传接口（头像上传）

* 头像上传路径： 101.201.36.172:520/profile 
* 文件名为：userid+源文件名
* 上传后会将路径存储在user中的heading中，随user类获取而传输
* 前端调用时直接访问数据库需要文件的绝对路径即可
* 参数传递格式参考下图

| 接口url                         | 类型 | 返回值                                   | 说明                                                   | 参数                           |
| ------------------------------- | ---- | ---------------------------------------- | ------------------------------------------------------ | ------------------------------ |
| 101.201.36.172:520/saveProfiles | Post | {"flag":true或者false,"data":状态说明句} | 保存头像至服务器本地文件夹    /profile/userid+源文件名 | Body传参数，key包涵：file，uid |

![](C:\Users\雲秦\Desktop\屏幕截图 2022-03-20 205049.png)





